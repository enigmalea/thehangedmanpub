---
import StarlightPage from "@astrojs/starlight/components/StarlightPage.astro";
import ModCard from "../../components/ModCard.astro";

import { getCollection } from "astro:content";

const discordMods = [
  ...(await getCollection("mods", (mod) =>
    mod.data.mod_duties.includes("discord")
  )),
];

// const pillowfortMods = [
//   ...(await getCollection("mods", (mod) =>
//     mod.data.mod_duties.includes("pillowfort")
//   )),
// ];

// const dreamwidthMods = [
//   ...(await getCollection("mods", (mod) =>
//     mod.data.mod_duties.includes("dreamwidth")
//   )),
// ];

const arlathanMods = [
  ...(await getCollection("mods", (mod) =>
    mod.data.mod_duties.includes("arlathan")
  )),
];

const dapolyMods = [
  ...(await getCollection("mods", (mod) =>
    mod.data.mod_duties.includes("da poly")
  )),
];
---

<StarlightPage
  frontmatter={{
    title: "Leadership Team",
    description:
      "Meet the folks who keep the tavern running â€” the moderators and organizers who support our communities and uphold our shared expectations.",
    prev: false,
    tableOfContents: false,
  }}
>
  Our moderators help keep each community and event running smoothly. They
  welcome members, guide conversations, and uphold our shared <a
    href="/community/code">Code of Conduct</a
  >. Different spaces have different teams based on their purpose and pace

  <h2>Discord</h2>
  <div
    class="grid grid-cols-1 items-end justify-items-start gap-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3"
  >
    {
      discordMods.map(async (mod) => {
        return (
          <ModCard
            name={mod.data.name}
            avatar={mod.data.avatar}
            links={mod.data.links}
            mod_duties={mod.data.mod_duties}
          />
        );
      })
    }
  </div>

  <!-- <h2>Pillowfort</h2>
  <div
    class="grid grid-cols-1 items-end justify-items-start gap-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3"
  >
    {
      pillowfortMods.map(async (mod) => {
        return (
          <ModCard
            name={mod.data.name}
            avatar={mod.data.avatar}
            links={mod.data.links}
            mod_duties={mod.data.mod_duties}
          />
        );
      })
    }
  </div>

  <h2>Dreamwidth</h2>
  <div
    class="grid grid-cols-1 items-end justify-items-start gap-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3"
  >
    {
      dreamwidthMods.map(async (mod) => {
        return (
          <ModCard
            name={mod.data.name}
            avatar={mod.data.avatar}
            links={mod.data.links}
            mod_duties={mod.data.mod_duties}
          />
        );
      })
    }
  </div> -->

  <h2>Arlathan eXchange</h2>
  <div
    class="grid grid-cols-1 items-end justify-items-start gap-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3"
  >
    {
      arlathanMods.map(async (mod) => {
        return (
          <ModCard
            name={mod.data.name}
            avatar={mod.data.avatar}
            links={mod.data.links}
            mod_duties={mod.data.mod_duties}
          />
        );
      })
    }
  </div>

  <h2>DA Polyshipping</h2>
  <div
    class="grid grid-cols-1 items-end justify-items-start gap-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3"
  >
    {
      dapolyMods.map(async (mod) => {
        return (
          <ModCard
            name={mod.data.name}
            avatar={mod.data.avatar}
            links={mod.data.links}
            mod_duties={mod.data.mod_duties}
          />
        );
      })
    }
  </div>
</StarlightPage>
